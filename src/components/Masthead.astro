<section id="masthead" class="masthead">
  <div class="masthead__content flex flex--center flex--column">
    <img
      src="/yoel-valverde.svg"
      alt="Yoel Valverde - Desarrollador de software"
      id="mastheadName"
      class="masthead__name"
    />
  </div>
</section>

<style>
.masthead {
  height: 100vh;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: -100;
}

.masthead__content {
  width: 100%;
  height: 100%;
}
</style>

<script>
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { $ } from "@/lib/dom-selector";

const $masthead = $<HTMLDivElement>("#masthead");
let progress = 0;

const handleScroll = () => {
  if ($masthead) {
    progress = Math.min(1, window.scrollY / $masthead.clientHeight);

    $masthead.style.transform = `translateY(-${progress * 20}vh)`;
  }
}

document.addEventListener("scroll", handleScroll, { passive: true });
window.removeEventListener("beforeunload", handleScroll);

gsap.registerPlugin(ScrollTrigger);

gsap.to("#mastheadName", {
  scrollTrigger: {
    trigger: "#masthead",
    start: "top top",
    scrub: 1.9
  },
  yPercent: -40
});
</script>
