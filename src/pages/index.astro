---
import { Image } from 'astro:assets'
import Layout from '../layouts/Layout.astro'
import SectionLayout from '../components/layouts/SectionLayout.astro'
// import ScrollIndicator from '../components/ScrollIndicator.astro'
import ButtonLink from '../components/ButtonLink.astro'
import ButtonLinkNew from '@/components/ButtonLinkNew.astro'
import ProjectCard from '../components/ProjectCard.astro'
import SkillList from '../components/SkillList.astro'
import OtherSkillList from '../components/OtherSkillList.astro'
import cutePenguinGamingDark from '../assets/icons/cute-penguin-gaming.svg'
import { valueOfDate } from '../utils/valueOfDate'
import { IoIosArrowForward } from 'react-icons/io/index.js'
import Masthead from '@/components/Masthead.astro'
import Content from '@/components/Content.astro'

import '@/styles/shadow.css'

const personalProjects = (await Astro.glob('./projects/*.md'))
.sort((a: any, b: any) => {
  return valueOfDate(b.frontmatter.createdAt) - valueOfDate(a.frontmatter.createdAt)
})
.slice(0, 2)
---

<Layout
  title="Yoel Valverde - Frontend Developer"
  description="Fullstack web developer, immerse yourself in a unique experience that reflects my passion and excellence with just one click."
>
  <Masthead />

  <Content>
    <!-- Projects -->
    <SectionLayout
      title="Proyectos"
      options={[
        { label: 'Personales', labelAbbreviation: 'Pers', link: '/categories/personal', target: '_self'},
        { label: 'Colaboraciones', labelAbbreviation: 'Colab', link: '/categories/collaborations', target: '_self'}
      ]}
    >
      <div class="my-12">
        <ul class="grid grid-cols-1 gap-y-12 sm:grid-cols-2 sm:gap-y-0 sm:gap-x-8">
          {personalProjects.map(project => (
            <ProjectCard
              href={project.url}
              imageUrl={project.frontmatter.heroImage}
              title={project.frontmatter.title}
              stack={project.frontmatter.stack}
            />
          ))}
        </ul>
      </div>

      <div class="flex justify-center">
        <ButtonLinkNew href='/projects'>
          Ver todos los proyectos
        </ButtonLinkNew>
      </div>
    </SectionLayout>

    <!-- About me -->
    <SectionLayout
      title="Acerca de"
      options={[
        { label: 'Email', labelAbbreviation: 'EM', link: 'mailto:yoelvp73@gmail.com/', target: '_blank'},
        { label: 'LinkedIn', labelAbbreviation: 'IN', link: 'https://linkedin.com/in/yoelvalverdepolo/', target: '_blank'},
        { label: 'Github', labelAbbreviation: 'GH', link: 'https://github.com/yoelvp/', target: '_blank'}
      ]}
      className="mb-12"
    >
      <article class="flex justify-start items-center gap-8 mb-8">
        <Image
          src={cutePenguinGamingDark}
          alt='cute kid'
          class='w-24 object-contain'
        />
        <div>
          <h2 class="white-to-primary text-xl font-bold sm:text-2xl">
            Yoel Valverde
          </h2>
          <h3 class="white-to-primary text-sm text-zinc-300">
            Desarrollador Frontend (TypeScript / React / Svelte / Laravel / Express)
          </h3>
        </div>
      </article>
      <article class="space-y-8">
        <p class="white-to-primary text-zinc-300">
          +1 año de inmersión en el apasionante mundo del <strong class="font-medium dark:text-white white-to-secondary dark:white-to-primary">desarrollo de software</strong>, me he especializado en el desarrollo web, <strong class="font-medium dark:text-white white-to-secondary dark:white-to-primary">destacando</strong> especialmente en el <strong class="font-medium dark:white white-to-secondary dark:white-to-primary">frontend</strong> con herramientas como React, TypeScript y Svelte. Sin embargo, <strong class="font-medium dark:text-white white-to-secondary dark:white-to-primary">mi curiosidad y experiencia</strong> van más allá; también domino el mundo del <strong class="font-medium dark:text-white white-to-secondary dark:white-to-primary">backend</strong>, creando servicios que enlazan la esencia detrás de escena con la increíble experiencia que ofrezco. Utilizo tecnologías como NodeJS, Express, NestJS, PHP, Laravel, y bases de datos como MySQL y PostgreSQL, entre otras.
        </p>
        <!-- <p class="white-to-secondary dark:white-to-primary text-zinc-800 dark:text-zinc-300"> -->
        <!--   Desde ese primer "Hola mundo :)" en una tarde de lunes, tras abrir la caja de mi laptop que ha sido mi compañera en este increíble mundo del desarrollo de software, he estado programando y creando constantemente. -->
        <!-- </p> -->
        <div class="flex justify-center items-center">
          <ButtonLink href='/about'>
            Ver más
            <IoIosArrowForward size='16' />
          </ButtonLink>
        </div>
      </article>
    </SectionLayout>

    <!-- Skills -->
    <SectionLayout title='Habilidades'>
      <SkillList />
    </SectionLayout>

    <SectionLayout title='Otras habilidades' className='mb-8'>
      <OtherSkillList />
    </SectionLayout>
  </Content>
</Layout>

<style>
.h-hero {
  height: auto;
  min-height: calc(100vh - 64px);
}

.title-line-height {
  line-height: 1.2;
}

.text-wrap {
  text-wrap: pretty;
}
</style>

<script>
import { $ } from '../lib/dom-selector'
import { DomIds } from '../constants/dom-ids'

const downloadCvButton = $(`#${DomIds.DOWNLOAD_CV_BUTTON}`)
downloadCvButton?.addEventListener('click', () => {
  const link = document.createElement('a')
  link.href = '/files/yoel-valverde-cv.pdf'
  link.download = 'yoel-valverde-cv.pdf'
  document.body.appendChild(link)
  link.click()
  document.body.removeChild(link)
})
</script>
